{#
  TAGS LIST TEMPLATE (templates/tags/list.html)
  
  Purpose: Displays all available tags with post counts
  URL: /tags/
  
  Context Variables:
  - taxonomy: The taxonomy object (name="tags")
  - terms: Array of tag objects with .name, .permalink, .pages
  - config: Site configuration
  - lang: Current language code
  
  Features:
  - Shows grid of all tags
  - Displays post count for each tag
  - Links to individual tag pages
  - Uses DaisyUI card components
  
  Note: This is a standalone template (doesn't extend index.html)
  because taxonomy pages need custom head/body structure.
#}

{% import "macros/head.html" as macros_head %}
{% import "macros/search.html" as macros_search %}
{% import "macros/header.html" as macros_header %}
{% import "macros/footer.html" as macros_footer %}
{% import "macros/sidebar.html" as macros_sidebar %}

<!DOCTYPE html>
{{ macros_head::html_tag(config=config, lang=lang) }}
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ taxonomy.name | capitalize }} - {{ config.title }}</title>
    <meta name="description" content="Browse content by {{ taxonomy.name }}">
    
    {# Include theme CSS and scripts #}
    <link rel="stylesheet" href="{{ get_url(path='css/main.css') }}">
    {% if config.extra.custom_css %}
    <link rel="stylesheet" href="{{ get_url(path=config.extra.custom_css) }}">
    {% endif %}
    
    {# Theme initialization script #}
    <script>
        (function() {
            var themeMapping = { "goyo-dark": "night", "goyo-light": "lofi" };
            var defaultColorset = "{{ config.extra.theme.colorset | default(value='dark') }}";
            var themeMap = { "dark": "goyo-dark", "light": "goyo-light" };
            var fallbackTheme = themeMap[defaultColorset] || "goyo-dark";
            var currentUserTheme = localStorage.getItem('theme') || fallbackTheme;
            var actualTheme = themeMapping[currentUserTheme] || currentUserTheme;
            document.documentElement.setAttribute("data-theme", actualTheme);
        })();
    </script>
</head>
<body>
    {{ macros_search::search(config=config) }}

    <div class="drawer lg:drawer-open">
        <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
        <div class="drawer-content flex flex-col pt-16">
            {{ macros_header::header(config=config, lang=lang) }}

            <div class="p-8 w-full flex justify-center">
                <div class="w-full max-w-7xl">
                    <main class="prose w-full">
                        <div class="mb-12 pb-4 border-b border-gray-500/15">
                            <h1>{{ taxonomy.name | capitalize }}</h1>
                            <p class="text-gray-500">Browse content by {{ taxonomy.name }}</p>
                        </div>

                        <div class="not-prose">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {% for term in terms %}
                                <a href="{{ term.permalink }}" class="card bg-base-200 shadow-lg hover:shadow-xl transition-shadow">
                                    <div class="card-body">
                                        <h3 class="card-title">{{ term.name }}</h3>
                                        <p class="text-sm text-gray-500">{{ term.pages | length }} {% if term.pages | length == 1 %}post{% else %}posts{% endif %}</p>
                                    </div>
                                </a>
                                {% endfor %}
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            {{ macros_footer::footer(config=config, current_url=config.base_url) }}
        </div>

        {{ macros_sidebar::sidebar(config=config, lang=lang, current_path="/tags/", section=false) }}
    </div>

    {# Scripts #}
    <script src="{{ get_url(path='goyo.js') }}"></script>
    {% if config.build_search_index %}
    <script src="{{ get_url(path='elasticlunr.min.js') }}"></script>
    <script src="{{ get_url(path='search_index.' ~ lang ~ '.js') }}"></script>
    {% endif %}
</body>
</html>
